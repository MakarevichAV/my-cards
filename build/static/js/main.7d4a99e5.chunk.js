(this["webpackJsonpmy-cards"]=this["webpackJsonpmy-cards"]||[]).push([[0],{19:function(e,t,a){},28:function(e,t,a){e.exports=a(54)},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(20),s=a(5),l=a(11),d=a(22),o=a(21);const i={user:null,error:null};var m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return{...e,user:t.payload,error:null};case"LOGIN_FAILURE":case"REGISTER_FAILURE":return{...e,user:null,error:t.payload};default:return e}};const u={user:null,userI:null,error:null,successMessage:null,isAuthenticated:"true"===localStorage.getItem("isAuthenticated"),isLogin:!0};var p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return localStorage.setItem("isAuthenticated","true"),{...e,user:t.payload.user.username,userId:t.payload.user._id,error:null,isAuthenticated:!0};case"LOGIN_FAILURE":return localStorage.setItem("isAuthenticated","false"),{...e,user:null,error:t.payload,isAuthenticated:!1};case"LOGOUT":return localStorage.setItem("isAuthenticated","false"),{...e,user:null,error:null,isAuthenticated:!1};case"REGISTER_SUCCESS":return{...e,user:t.payload,error:null,successMessage:t.payload.message};case"REGISTER_FAILURE":return{...e,user:null,error:t.payload};case"SET_IS_LOGIN":return{...e,isLogin:t.payload};case"SET_SUCCESS_MESSAGE":return{...e,successMessage:t.payload};case"CLEAR_SUCCESS_MESSAGE":return{...e,successMessage:null};default:return e}};const E=[];var y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_DIRECTORY":return e.map(e=>e._id===t.payload.id?{...e,isEditing:!1,name:t.payload.editedName,image:t.payload.editedImage}:e);case"DELETE_DIRECTORY":return e.filter(e=>e._id!==t.payload.id);case"ADD_DIRECTORY":return[...e,{_id:t.payload._id,name:"New Directory",image:"",setsCount:0,isEditing:!0,editedName:"",editedImage:""}];case"GET_DIRECTORIES":return t.payload;case"UPDATE_DIRECTORY_SETS_COUNT":return e.map(e=>e._id===t.payload.id?{...e,setsCount:t.payload.setsCount}:e);default:return e}};const v=[];var g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_SET":return e.map(e=>e._id===t.payload.id?{...e,isEditing:!1,name:t.payload.editedName,image:t.payload.editedImage}:e);case"DELETE_SET":return e.filter(e=>e._id!==t.payload.id);case"ADD_SET":return[...e,{_id:t.payload._id,directoryId:t.payload.directoryId,name:"New Set",image:"",cardsCount:0,isEditing:!0,editedName:"",editedImage:""}];case"GET_SETS":return t.payload;case"UPDATE_SET_CARDS_COUNT":return e.map(e=>e._id===t.payload.id?{...e,cardsCount:t.payload.cardsCount}:e);default:return e}};const b=[];var h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CARD":return e.map(e=>e._id===t.payload.id?{...e,image:t.payload.editedImage,phrase:t.payload.editedPhrase,transcription:t.payload.editedTranscription,note:t.payload.editedNote,example1:t.payload.editedExample1,translation:t.payload.editedTranslation,example2:t.payload.editedExample2}:e);case"DELETE_CARD":return e.filter(e=>e._id!==t.payload.id);case"ADD_CARD":return[...e,{_id:t.payload._id,setId:t.payload.setId,directoryId:t.payload.directoryId,image:"",phrase:"",transcription:"",note:"",example1:"",translation:"",example2:"",editedImage:"",editedPhrase:"",editedTranscription:"",editedNote:"",editedExample1:"",editedTranslation:"",editedExample2:"",isEditing:!0}];case"GET_CARDS":return t.payload;default:return e}};var N=Object(l.combineReducers)({sample:m,auth:p,directory:y,set:g,card:h}),S=a(58);var C=()=>Object(l.createStore)(N,Object(o.composeWithDevTools)(Object(l.applyMiddleware)(d.a.withExtraArgument({axios:S.a})))),O=a(7),I=a(3);var w=e=>{let{onSubmit:t}=e;const[a,n]=Object(c.useState)(""),[l,d]=Object(c.useState)(""),o=Object(s.c)(),i=Object(s.d)(e=>e.auth.error);return r.a.createElement("div",null,r.a.createElement("label",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",r.a.createElement("input",{type:"text",value:a,onChange:e=>n(e.target.value)})),r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",r.a.createElement("input",{type:"password",value:l,onChange:e=>d(e.target.value)})),r.a.createElement("button",{className:"btn-type1",onClick:()=>{o((e=>{let{username:t,password:a}=e;return async e=>{try{const c=await S.a.post("".concat("https://myedcards.ru","/login"),{username:t,password:a});e({type:"LOGIN_SUCCESS",payload:c.data});const r={userId:c.data.user._id,username:c.data.user.username};localStorage.setItem("user",JSON.stringify(r))}catch(i){e({type:"LOGIN_FAILURE",payload:i.message})}}})({username:a,password:l})),t({username:a,password:l})}},"\u0412\u043e\u0439\u0442\u0438"),i&&r.a.createElement("p",{style:{color:"red"}},i))};var f=e=>{let{onSubmit:t}=e;const[a,n]=Object(c.useState)(""),[l,d]=Object(c.useState)(""),[o,i]=Object(c.useState)(""),m=Object(s.c)(),u=Object(s.d)(e=>e.auth.error),p=Object(s.d)(e=>e.auth.successMessage);Object(c.useEffect)(()=>{p&&(m({type:"SET_IS_LOGIN",payload:!0}),m({type:"SET_SUCCESS_MESSAGE",payload:p}))},[p,m]);return r.a.createElement("div",null,r.a.createElement("label",null,"Username:",r.a.createElement("input",{type:"text",value:a,onChange:e=>n(e.target.value)})),r.a.createElement("label",null,"Password:",r.a.createElement("input",{type:"password",value:l,onChange:e=>d(e.target.value)})),r.a.createElement("label",null,"Confirm Password:",r.a.createElement("input",{type:"password",value:o,onChange:e=>i(e.target.value)})),r.a.createElement("button",{className:"btn-type1",onClick:()=>{l===o?(m((e=>{let{username:t,password:a}=e;return async e=>{try{e({type:"REGISTER_SUCCESS",payload:(await S.a.post("".concat("https://myedcards.ru","/register"),{username:t,password:a})).data})}catch(u){e({type:"REGISTER_FAILURE",payload:u.message})}}})({username:a,password:l})),t({username:a,password:l})):m({type:"REGISTER_FAILURE",payload:"Passwords do not match"})}},"Register"),u&&r.a.createElement("p",{style:{color:"red"}},u))};a(41);var j=()=>{const e=Object(s.c)(),t=Object(s.d)(e=>e.auth.isLogin),[a,n]=Object(c.useState)({}),l=Object(s.d)(e=>e.auth.successMessage),d=Object(I.p)(),o=Object(s.d)(e=>e.auth.isAuthenticated);Object(c.useEffect)(()=>{l&&t&&d("/home")},[l,t,d]),Object(c.useEffect)(()=>{o&&d("/home")},[o,d]);const i=e=>{n(e)};return r.a.createElement("div",null,r.a.createElement("div",{className:"logo-container"},r.a.createElement("img",{src:"/max-logo.svg",alt:"Logo"})),r.a.createElement("div",{className:"login-container"},l&&r.a.createElement("div",{className:"success-message"},l),r.a.createElement("h2",null,t?"Login":"Register"),t?r.a.createElement(w,{onSubmit:i}):r.a.createElement(f,{onSubmit:i}),r.a.createElement("p",{onClick:()=>{e({type:"SET_IS_LOGIN",payload:!t})}},t?"Need to register?":"Already have an account?")))};a(42);var _=e=>{let{message:t,onCancel:a,onConfirm:n}=e;const s=Object(c.useRef)(null),l=e=>{s.current===e.target&&a()};return Object(c.useEffect)(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),r.a.createElement("div",{className:"confirm",ref:s},r.a.createElement("div",{className:"confirm-content"},r.a.createElement("div",{className:"confirm-cross",onClick:a}),r.a.createElement("div",{className:"exclamation-mark"}),r.a.createElement("p",{className:"confirm-text"},t),r.a.createElement("div",{className:"confirm-buttons"},r.a.createElement("div",{className:"btn-type1",onClick:a},"Cancel"),r.a.createElement("div",{className:"btn-type2",onClick:n},"Exit"))))};a(43);var k=Object(s.b)(null,e=>({onAddDirectory:()=>e(async(e,t)=>{try{const t={name:"New Directory",image:"",setsCount:0},a=localStorage.getItem("user"),c=JSON.parse(a).userId;e({type:"ADD_DIRECTORY",payload:(await S.a.post("".concat("https://myedcards.ru","/addDirectory"),{...t,userId:c})).data})}catch(n){var a,c,r;throw console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438:",n),console.error("Response data:",null===(a=n.response)||void 0===a?void 0:a.data),console.error("Response status:",null===(c=n.response)||void 0===c?void 0:c.status),console.error("Response headers:",null===(r=n.response)||void 0===r?void 0:r.headers),n}}),onLogout:()=>e(e=>{localStorage.removeItem("user"),e({type:"LOGOUT"})})}))(e=>{let{onAddDirectory:t,onLogout:a,showAddDirectory:n,showGoToBack:s,showGoToSets:l,directoryId:d}=e;const[o,i]=Object(c.useState)(!1),m=Object(I.p)(),u=()=>{m("/home")};return r.a.createElement("header",null,r.a.createElement("div",{className:"logo",onClick:u}),n&&r.a.createElement("div",{className:"page-title"},"Directories"),r.a.createElement("div",{style:{display:"flex"}},n&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"add-directory",onClick:t})),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"go-to-back",onClick:u})),l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"go-to-back",onClick:()=>{m("/sets/".concat(d))}})),r.a.createElement("div",{className:"delimiter"}),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"logout",onClick:()=>{i(!0)}}),o&&r.a.createElement(_,{message:"Do you really want to exit your account?",onCancel:()=>{i(!1)},onConfirm:()=>{a(),i(!1)}}))))});a(44),a(45);var T=()=>r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"lds-dual-ring"}));var x=e=>{let{onClose:t,onImageSelect:a}=e;const[n,s]=Object(c.useState)(""),[l,d]=Object(c.useState)([]),[o,i]=Object(c.useState)(!1),m=async()=>{try{i(!0);const e=await S.a.get("https://pixabay.com/api/?key=33256265-9311bbeda59bd85787262c6fb&q=".concat(encodeURIComponent(n),"&image_type=illustration&per_page=50"));d(e.data.hits)}catch(e){console.error("Error searching images:",e)}finally{i(!1)}};return r.a.createElement("div",{className:"search-popup"},r.a.createElement("div",{className:"search-header"},r.a.createElement("div",{className:"search-input-wrap"},r.a.createElement("input",{type:"text",onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()},placeholder:"Searching image"}),r.a.createElement("div",{className:"loupe",onClick:m})),r.a.createElement("div",{className:"close-icon",onClick:t})),r.a.createElement("div",{className:"search-results"},o?r.a.createElement("div",{className:"loader-wrap"},r.a.createElement(T,null)):l.length>0?l.map(e=>r.a.createElement("div",{className:"search-item",key:e.id,onClick:()=>{return c=e.previewURL,a(c),void t();var c},style:{backgroundImage:"url(".concat(e.previewURL,")"),backgroundSize:"contain"}})):r.a.createElement("p",{className:"search-result-note"},"No search results. Try changing your search query.")))};var R=Object(s.b)((e,t)=>{e.directory.find(e=>e.id===t.id);return{isEditing:t.isEditing||!1,editedName:t.editedName||"",editedImage:t.editedImage||""}},e=>({onEdit:t=>e(((e,t,a)=>({type:"EDIT_DIRECTORY",payload:{id:e,editedName:t,editedImage:a}}))(t)),onSave:(t,a,c)=>{e(((e,t,a)=>async(c,r)=>{try{const r=localStorage.getItem("user"),n=JSON.parse(r).userId;await S.a.put("".concat("https://myedcards.ru","/editDirectory/").concat(e),{editedName:t,editedImage:a,userId:n}),c({type:"SAVE_DIRECTORY",payload:{id:e,editedName:t,editedImage:a}})}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438:",n)}})(t,a,c))},onDelete:t=>e((e=>async(t,a)=>{try{const a=localStorage.getItem("user"),c=JSON.parse(a).userId;await S.a.delete("".concat("https://myedcards.ru","/deleteDirectory/").concat(e,"?userId=").concat(c)),t({type:"DELETE_DIRECTORY",payload:{id:e}})}catch(c){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438:",c)}})(t))}))(e=>{let{_id:t,name:a,image:n,setsCount:s,editedName:l,editedImage:d,onSave:o,onDelete:i}=e;const[m,u]=Object(c.useState)(!1),[p,E]=Object(c.useState)(!1),[y,v]=Object(c.useState)(!1),[g,b]=Object(c.useState)(l||""),[h,N]=Object(c.useState)(n||""),[S,C]=Object(c.useState)(""),O=Object(I.p)();Object(c.useEffect)(()=>{p&&b(a||"")},[p,l,d,a,n]),Object(c.useEffect)(()=>{S&&(N(S),C(""))},[S]);const w={backgroundImage:"url(".concat(h||"/images/folder.png",")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"80px",height:"80px",marginRight:"15px",borderRadius:"8px"},f=()=>{o(t,g,h),E(!1)},[j,_]=Object(c.useState)(!1),k=()=>{_(!0)},R=()=>{_(!1)},D=()=>{E(!0)},A=()=>{O("/sets/".concat(t),{state:{directoryName:a}})};return r.a.createElement("div",{className:"directory-tile"},j&&r.a.createElement("div",{className:"directory-popup"},y&&r.a.createElement(T,null),!y&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"directory-popup-crose",onClick:R}),r.a.createElement("p",{className:"directory-confirm-text"},r.a.createElement("div",{className:"set-popup-icon"}),"Delete the directory?"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"btn-type1 directory-confirm-btn",onClick:R},"can\u0441el"),r.a.createElement("div",{className:"btn-type2 directory-confirm-btn",onClick:async()=>{v(!0);try{await i(t)}finally{v(!1)}}},"delete")))),r.a.createElement("div",{className:"directory-image",style:w}),m&&r.a.createElement(x,{onClose:()=>{u(!1)},onImageSelect:e=>{N(e)}}),p?r.a.createElement("div",{className:"directory-info"},r.a.createElement("input",{className:"directory-input",type:"text",value:g,onChange:e=>b(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438"}),r.a.createElement("div",{className:"directory-edit-buttons"},r.a.createElement("div",{className:"btn-type2 btn-choose-img",onClick:()=>{u(!0)}},r.a.createElement("div",{className:"camera"}),r.a.createElement("span",{className:"btn-text"},"picture")),r.a.createElement("div",{className:"save-directory btns mobile",onClick:f}),r.a.createElement("div",{className:"delete-directory btns mobile",onClick:k}))):r.a.createElement("div",{className:"directory-info"},r.a.createElement("div",{className:"directory-name"},a),r.a.createElement("div",{className:"sets-count"},s," sets"),r.a.createElement("div",{className:"directory-btns btns_mobile"},r.a.createElement("div",{className:"btn-type1",onClick:A},"\u21d2 to sets"),r.a.createElement("div",{className:"edit-directory btns",onClick:D}))),p?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"save-directory btns desctop",onClick:f}),r.a.createElement("div",{className:"delete-directory btns desctop",onClick:k})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"btn-type1 btns_desctop",onClick:A},"\u21d2 to sets"),r.a.createElement("div",{className:"edit-directory btns btns_desctop",onClick:D})))});a(46);var D=Object(s.b)(e=>({directories:e.directory}),e=>({onGetDirectories:()=>e(async(e,t)=>{try{const t=localStorage.getItem("user"),a=JSON.parse(t).userId,c=await S.a.get("".concat("https://myedcards.ru","/directories/").concat(a));e({type:"GET_DIRECTORIES",payload:c.data})}catch(a){console.error("Error getting directories:",a)}})}))(e=>{let{directories:t,onGetDirectories:a}=e;const[n,s]=Object(c.useState)(!1),[l,d]=Object(c.useState)(!0),[o,i]=Object(c.useState)(null);Object(c.useEffect)(()=>{(async()=>{try{d(!0);await a();d(!1)}catch(o){i(o.message),d(!1)}})()},[a]);const m=Array.isArray(t)?[...t].reverse():[];return r.a.createElement("div",{className:"home-page page"},r.a.createElement(k,{showAddDirectory:!0,showGoToBack:!1}),r.a.createElement("div",{className:"content"},l?r.a.createElement(T,null):o?r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,o)):m.length>0?m.map(e=>r.a.createElement(R,Object.assign({key:e._id},e))):r.a.createElement("div",{className:"page-description"},r.a.createElement("p",null,"Your directories will be here"))),n&&r.a.createElement(R,{key:"new",id:"new",name:"",image:"",setsCount:0,isEditing:!0,editedName:"",editedImage:""}))});const A=(e,t)=>({type:"UPDATE_DIRECTORY_SETS_COUNT",payload:{id:e,setsCount:t}});a(47);var L=Object(s.b)((e,t)=>{e.set.find(e=>e.id===t.id);return{isEditing:t.isEditing||!1,editedName:t.editedName||"",editedImage:t.editedImage||""}},e=>({onEdit:t=>e(((e,t,a)=>({type:"EDIT_SET",payload:{id:e,editedName:t,editedImage:a}}))(t)),onSave:(t,a,c,r)=>{e(((e,t,a,c)=>async(r,n)=>{try{await S.a.put("".concat("https://myedcards.ru","/editSet/").concat(e),{editedName:t,editedImage:a,directoryId:c}),r({type:"SAVE_SET",payload:{id:e,editedName:t,editedImage:a}})}catch(s){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043d\u0430\u0431\u043e\u0440\u0430:",s)}})(t,a,c,r))},onDelete:(t,a)=>e(((e,t)=>async(a,c)=>{try{await S.a.delete("".concat("https://myedcards.ru","/deleteSet/").concat(e,"?directoryId=").concat(t)),a({type:"DELETE_SET",payload:{id:e}});const r=c().set.length;a(A(t,r))}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043d\u0430\u0431\u043e\u0440\u0430:",r)}})(t,a))}))(e=>{let{_id:t,name:a,image:n,cardsCount:s,editedName:l,editedImage:d,onSave:o,onDelete:i,directoryId:m}=e;const[u,p]=Object(c.useState)(!1),[E,y]=Object(c.useState)(!1),[v,g]=Object(c.useState)(!1),[b,h]=Object(c.useState)(l||""),[N,S]=Object(c.useState)(n||""),[C,O]=Object(c.useState)(""),w=Object(I.p)();Object(c.useEffect)(()=>{E&&h(a||"")},[E,l,d,a,n]),Object(c.useEffect)(()=>{C&&(S(C),O(""))},[C]);const f={backgroundImage:"url(".concat(N||"/images/cards.png",")"),backgroundSize:"".concat(N?"cover":"contain"),backgroundPosition:"top center",backgroundRepeat:"no-repeat",minWidth:"80px",height:"80px",marginRight:"15px",borderRadius:"8px"},j=()=>{o(t,b,N,m),y(!1)},[_,k]=Object(c.useState)(!1),R=()=>{k(!0)},D=()=>{k(!1)},A=()=>{y(!0)},L=()=>{w("/creator/".concat(m,"/").concat(t),{state:{setName:a}})},G=()=>{w("/viewer/".concat(m,"/").concat(t),{state:{setName:a}})};return r.a.createElement("div",{className:"set-tile"},_&&r.a.createElement("div",{className:"set-popup"},v&&r.a.createElement(T,null),!v&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"set-popup-crose",onClick:D}),r.a.createElement("p",{className:"set-confirm-text"},r.a.createElement("div",{className:"set-popup-icon"}),"Delete the set?"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"btn-type1 set-confirm-btn",onClick:D},"can\u0441el"),r.a.createElement("div",{className:"btn-type2 set-confirm-btn",onClick:async()=>{g(!0);try{await i(t,m)}finally{g(!1)}}},"delete")))),r.a.createElement("div",{className:"set-image",style:f}),u&&r.a.createElement(x,{onClose:()=>{p(!1)},onImageSelect:e=>{S(e)}}),E?r.a.createElement("div",{className:"set-info"},r.a.createElement("input",{className:"set-input",maxLength:"25",type:"text",value:b,onChange:e=>h(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438"}),r.a.createElement("div",{className:"set-edit-buttons"},r.a.createElement("div",{className:"btn-type2",onClick:()=>{p(!0)}},r.a.createElement("div",{className:"camera"}),r.a.createElement("span",{className:"btn-text"},"picture")),r.a.createElement("div",{className:"save-set btns mobile",onClick:j}),r.a.createElement("div",{className:"delete-set btns mobile",onClick:R}))):r.a.createElement("div",{className:"set-info"},r.a.createElement("div",{className:"set-name"},a),r.a.createElement("div",{className:"cards-count"},s," cards"),r.a.createElement("div",{className:"btns_mobile"},r.a.createElement("div",{className:"btn-type3 btn-creat",onClick:L},r.a.createElement("div",{className:"set-tile-btn-icon-creat"}),r.a.createElement("span",{className:"btn-text"},"creat")),r.a.createElement("div",{className:"btn-type1 btn-view",onClick:G},r.a.createElement("div",{className:"set-tile-btn-icon-view"}),r.a.createElement("span",{className:"btn-text"},"view")),r.a.createElement("div",{className:"edit-set btns",onClick:A}))),E?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"save-set btns desctop",onClick:j}),r.a.createElement("div",{className:"delete-set btns desctop",onClick:R})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"btns_desctop"},r.a.createElement("div",{className:"btn-type3 btn-creat",onClick:L},r.a.createElement("div",{className:"set-tile-btn-icon-creat"}),r.a.createElement("span",{className:"btn-text"},"creat")),r.a.createElement("div",{className:"btn-type1 btn-view",onClick:G},r.a.createElement("div",{className:"set-tile-btn-icon-view"}),r.a.createElement("span",{className:"btn-text"},"view"))),r.a.createElement("div",{className:"edit-set btns btns_desctop",onClick:A})))});a(48);var G=Object(s.b)(e=>({sets:e.set}),(e,t)=>({onGetSets:t=>e((e=>async(t,a)=>{try{const a=await S.a.get("".concat("https://myedcards.ru","/sets/").concat(e));t({type:"GET_SETS",payload:a.data})}catch(c){console.error("Error getting sets:",c)}})(t)),onAddSet:t=>e((e=>async(t,a)=>{try{const c={name:"New Set",image:"",cardsCount:0};t({type:"ADD_SET",payload:(await S.a.post("".concat("https://myedcards.ru","/addSet"),{...c,directoryId:e})).data});const r=a().set.length;t(A(e,r))}catch(s){var c,r,n;throw console.error("Error of adding set:",s),console.error("Response data:",null===(c=s.response)||void 0===c?void 0:c.data),console.error("Response status:",null===(r=s.response)||void 0===r?void 0:r.status),console.error("Response headers:",null===(n=s.response)||void 0===n?void 0:n.headers),s}})(t))}))(e=>{var t;let{sets:a,onAddSet:n,onGetSets:s}=e;const l=(null===(t=Object(I.n)().state)||void 0===t?void 0:t.directoryName)||"Directory",[d,o]=Object(c.useState)(!0),[i,m]=Object(c.useState)(null),{directoryId:u}=Object(I.r)(),p=Array.isArray(a)?[...a].reverse():[];return Object(c.useEffect)(()=>{(async()=>{try{o(!0);await s(u);o(!1)}catch(i){m(i.message),o(!1)}})()},[s,u]),r.a.createElement("div",{className:"sets-page page"},r.a.createElement(k,{showAddDirectory:!1,showGoToBack:!0,showGoToSets:!1}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"sets-container"},r.a.createElement("div",{className:"sets-content-header"},r.a.createElement("h2",{className:"sets-title"},l),r.a.createElement("div",{className:"add-set",onClick:()=>n(u)})),r.a.createElement("div",{className:"container-content"},d?r.a.createElement(T,null):i?r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,i)):p.length>0?p.map(e=>r.a.createElement(L,Object.assign({key:e._id},e))):r.a.createElement("div",{className:"page-description"},r.a.createElement("p",null,"Your sets will be here"))))))});const U=(e,t)=>({type:"UPDATE_SET_CARDS_COUNT",payload:{id:e,cardsCount:t}}),P=e=>async(t,a)=>{try{const a=await S.a.get("".concat("https://myedcards.ru","/cards/").concat(e));t({type:"GET_CARDS",payload:a.data})}catch(c){console.error("Error getting cards:",c)}};var F=a(57);var Y=e=>{let{imageStyle:t,handleSearchClick:a,isChanged:c,handleSave:n,handleDeleteClick:s,handleInputChange:l,isConfirmOpen:d,isLoading:o,handleCancelConfirm:i,handleDelete:m,localEditedPhrase:u,setLocalEditedPhrase:p,localEditedTranscription:E,setLocalEditedTranscription:y,localEditedNote:v,setLocalEditedNote:g,localEditedExample1:b,setLocalEditedExample1:h,localEditedTranslation:N,setLocalEditedTranslation:S,localEditedExample2:C,setLocalEditedExample2:O}=e;return r.a.createElement("div",{className:"card-tile"},d&&r.a.createElement("div",{className:"card-popup"},o&&r.a.createElement(T,null),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-popup-crose",onClick:i}),r.a.createElement("div",{className:"card-popup-icon"}),r.a.createElement("p",{className:"card-confirm-text"},"Delete the card?"),r.a.createElement("div",{className:"btn-type1 card-confirm-btn",onClick:i},"can\u0441el"),r.a.createElement("div",{className:"btn-type2 card-confirm-btn",onClick:m},"delete"))),r.a.createElement("div",{className:"card-side1"},r.a.createElement("div",{className:"card-image-container card-row"},r.a.createElement("div",{className:"card-image",style:t}),r.a.createElement("div",{className:"btn-type2-short",onClick:a},r.a.createElement("div",{className:"camera"})),c&&r.a.createElement("div",{className:"save-card btns",onClick:n}),!c&&r.a.createElement("div",{className:"save-card-disact btns"}),r.a.createElement("div",{className:"delete-card btns",onClick:s})),r.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:u,onChange:e=>l(p,e),placeholder:"Word or phrase"}),r.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:E,onChange:e=>l(y,e),placeholder:"Transcription"}),r.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:v,onChange:e=>l(g,e),placeholder:"Additional information"}),r.a.createElement("textarea",{className:"card-input",maxLength:"60",type:"text",value:b,onChange:e=>l(h,e),placeholder:"Example of using this phrase"})),r.a.createElement("div",{className:"card-side2"},r.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:N,onChange:e=>l(S,e),placeholder:"Translation"}),r.a.createElement("textarea",{className:"card-input",maxLength:"60",type:"text",value:C,onChange:e=>l(O,e),placeholder:"Additional information"})))};a(49),a(50);var M=e=>{let{image:t,defaultImage:a,phrase:n,transcription:s,note:l,example1:d,translation:o,example2:i}=e;const[m,u]=Object(c.useState)(!1),p={backgroundImage:"url(".concat(t||a,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"};return r.a.createElement("div",{className:"card-tile view-mode ".concat(m?"flipped":""),onClick:()=>{u(!m)}},r.a.createElement("div",{className:"card-side1_view"},r.a.createElement("div",{className:"card-image_view",style:p}),r.a.createElement("p",{className:"card-phrase_view"},n),s&&r.a.createElement("p",{className:"card-transcription_view"},"[",s,"]"),l&&r.a.createElement("p",{className:"card-note_view"},l),d&&r.a.createElement("p",{className:"card-example_view"},d)),r.a.createElement("div",{className:"card-side2_view"},o&&r.a.createElement("p",{className:"card-translation_view"},o),i&&r.a.createElement("p",{className:"card-example_view"},i)))};var J=Object(s.b)((e,t)=>{e.card.find(e=>e.id===t.id);return{isEditing:t.isEditing||!1,editedImage:t.editedImage||"",editedPhrase:t.editedPhrase||"",editedTranscription:t.editedTranscription||"",editedNote:t.editedNote||"",editedExample1:t.editedExample1||"",editedTranslation:t.editedTranslation||"",editedExample2:t.editedExample2||""}},e=>({onEdit:t=>e(((e,t,a)=>({type:"EDIT_CARD",payload:{id:e,editedPhrase:t,editedImage:a}}))(t)),onSave:(t,a,c,r,n,s,l,d,o,i)=>{e(((e,t,a,c,r,n,s,l,d,o)=>async(i,m)=>{try{await S.a.put("".concat("https://myedcards.ru","/editCard/").concat(e),{editedImage:t,editedPhrase:a,editedTranscription:c,editedNote:r,editedExample1:n,editedTranslation:s,editedExample2:l,directoryId:d,setId:o}),i({type:"SAVE_CARD",payload:{id:e,editedImage:t,editedPhrase:a,editedTranscription:c,editedNote:r,editedExample1:n,editedTranslation:s,editedExample2:l}})}catch(u){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438:",u)}})(t,a,c,r,n,s,l,d,o,i))},onDelete:(t,a)=>e(((e,t)=>async(a,c)=>{try{await S.a.delete("".concat("https://myedcards.ru","/deleteCard/").concat(e,"?setId=").concat(t)),a({type:"DELETE_CARD",payload:{id:e}});const r=c().card.length;a(U(t,r))}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438:",r)}})(t,a))}))(e=>{let{_id:t,image:a,phrase:n,transcription:s,note:l,example1:d,translation:o,example2:i,editedImage:m,editedPhrase:u,editedTranscription:p,editedNote:E,editedExample1:y,editedTranslation:v,editedExample2:g,onSave:b,onDelete:h,directoryId:N,setId:S,creating:C}=e;const[O,w]=Object(c.useState)(!1),[f,j]=Object(c.useState)(C),[_,k]=Object(c.useState)(!1),[T,R]=Object(c.useState)(!1),[D,A]=Object(c.useState)(a||""),[L,G]=Object(c.useState)(u||""),[U,P]=Object(c.useState)(p||""),[F,J]=Object(c.useState)(E||""),[W,B]=Object(c.useState)(y||""),[V,z]=Object(c.useState)(v||""),[q,K]=Object(c.useState)(g||""),[H,Q]=Object(c.useState)("");Object(I.p)();Object(c.useEffect)(()=>{f&&(G(n||""),P(s||""),J(l||""),B(d||""),z(o||""),K(i||""))},[f,m,u,p,E,y,v,g,a,n,s,l,d,o,i]),Object(c.useEffect)(()=>{H&&(A(H),Q(""))},[H]);const X={backgroundImage:"url(".concat(D||"/images/cards.png",")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"70px",height:"70px",marginRight:"15px",borderRadius:"8px"},[Z,$]=Object(c.useState)(!1);return r.a.createElement(r.a.Fragment,null,f?r.a.createElement(Y,{isConfirmOpen:Z,isLoading:_,handleCancelConfirm:()=>{$(!1)},handleDelete:async()=>{k(!0);try{await h(t,S)}finally{k(!1)}},imageStyle:X,handleSearchClick:()=>{w(!0)},isChanged:T,handleSave:()=>{T&&(b(t,D,L,U,F,W,V,q,N,S),R(!1))},handleDeleteClick:()=>{$(!0)},handleInputChange:(e,t)=>{e(t.target.value),R(!0)},localEditedPhrase:L,setLocalEditedPhrase:G,localEditedTranscription:U,setLocalEditedTranscription:P,localEditedNote:F,setLocalEditedNote:J,localEditedExample1:W,setLocalEditedExample1:B,localEditedTranslation:V,setLocalEditedTranslation:z,localEditedExample2:q,setLocalEditedExample2:K}):r.a.createElement(M,{image:a,defaultImage:"/images/cards.png",phrase:n,transcription:s,note:l,example1:d,translation:o,example2:i}),O&&r.a.createElement(x,{onClose:()=>{w(!1)},onImageSelect:e=>{A(e),R(!0)}}))});a(18),a(19);var W=Object(s.b)(e=>({cards:e.card}),(e,t)=>({onGetCards:t=>e(P(t)),onAddCard:(t,a)=>e(((e,t)=>async(a,c)=>{try{const r={image:"",phrase:"",transcription:"",note:"",example1:"",translation:"",example2:""};a({type:"ADD_CARD",payload:(await S.a.post("".concat("https://myedcards.ru","/addCard"),{...r,directoryId:e,setId:t,setId:t})).data});const n=c().card.length;a(U(t,n))}catch(l){var r,n,s;throw console.error("Error of adding card:",l),console.error("Response data:",null===(r=l.response)||void 0===r?void 0:r.data),console.error("Response status:",null===(n=l.response)||void 0===n?void 0:n.status),console.error("Response headers:",null===(s=l.response)||void 0===s?void 0:s.headers),l}})(t,a))}))(e=>{var t;let{cards:a,onAddCard:n,onGetCards:s}=e;const l=Object(I.p)(),d=(null===(t=Object(I.n)().state)||void 0===t?void 0:t.setName)||"Set",[o,i]=Object(c.useState)(!0),[m,u]=Object(c.useState)(null),{directoryId:p,setId:E}=Object(I.r)(),[y,v]=Object(c.useState)(0),g=Array.isArray(a)?[...a].reverse():[];Object(c.useEffect)(()=>{(async()=>{try{i(!0);await s(E);i(!1)}catch(m){u(m.message),i(!1)}})()},[s,E]);const[b,h]=Object(c.useState)(!1);return r.a.createElement("div",{className:"cards-page page"},r.a.createElement(k,{showAddDirectory:!1,showGoToBack:!1,showGoToSets:!0,directoryId:p}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"cards-container"},r.a.createElement("div",{className:"cards-content-header",style:{backgroundColor:"#d9b216"}},r.a.createElement("h2",{className:"content-title"},d),r.a.createElement("div",{className:"cards-header-nav"},r.a.createElement("div",{className:"go-to-view",onClick:()=>{l("/viewer/".concat(p,"/").concat(E),{state:{setName:d}})}}),r.a.createElement("div",{className:"add-card",onClick:async()=>{h(!0);try{await n(p,E),v(0)}catch(m){console.error("Error adding card:",m)}finally{h(!1)}}}))),r.a.createElement("div",{className:"container-content"},o||b?r.a.createElement(T,null):m?r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,m)):g.length>0?r.a.createElement(F.a,{interval:null,activeIndex:y,onSelect:e=>v(e)},g.map(e=>r.a.createElement(F.a.Item,{key:e._id},r.a.createElement(J,Object.assign({creating:!0,viewing:!1},e))))):r.a.createElement("div",{className:"page-description"},r.a.createElement("p",null,"Your cards will be here"))))))});var B=Object(s.b)(e=>({cards:e.card}),(e,t)=>({onGetCards:t=>e(P(t))}))(e=>{var t;let{cards:a,onGetCards:n}=e;const s=Object(I.p)(),l=(null===(t=Object(I.n)().state)||void 0===t?void 0:t.setName)||"Set",[d,o]=Object(c.useState)(!0),[i,m]=Object(c.useState)(null),{directoryId:u,setId:p}=Object(I.r)(),[E,y]=Object(c.useState)(0),v=Array.isArray(a)?[...a].reverse():[];Object(c.useEffect)(()=>{(async()=>{try{o(!0);await n(p);o(!1)}catch(i){m(i.message),o(!1)}})()},[n,p]);return r.a.createElement("div",{className:"cards-page page"},r.a.createElement(k,{showAddDirectory:!1,showGoToBack:!1,showGoToSets:!0,directoryId:u}),r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"cards-container"},r.a.createElement("div",{className:"cards-content-header",style:{backgroundColor:"#525266"}},r.a.createElement("h2",{className:"content-title"},l),r.a.createElement("div",{className:"cards-header-nav"},r.a.createElement("div",{className:"go-to-creat",onClick:()=>{s("/creator/".concat(u,"/").concat(p),{state:{setName:l}})}}))),r.a.createElement("div",{className:"container-content"},d?r.a.createElement(T,null):i?r.a.createElement("div",{className:"error-message"},r.a.createElement("p",null,i)):v.length>0?r.a.createElement(F.a,{interval:null,activeIndex:E,onSelect:e=>y(e)},v.map(e=>r.a.createElement(F.a.Item,{key:e._id},r.a.createElement(J,Object.assign({creating:!1,viewing:!0},e))))):r.a.createElement("div",{className:"page-description"},r.a.createElement("p",null,"Your cards will be here"))))))});a(52);var V=()=>{const e=Object(s.d)(e=>e.auth.isAuthenticated);return r.a.createElement(O.a,null,r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/home",element:e?r.a.createElement(D,null):r.a.createElement(I.a,{to:"/",replace:!0})}),r.a.createElement(I.b,{path:"/sets/:directoryId",element:e?r.a.createElement(G,null):r.a.createElement(I.a,{to:"/",replace:!0})}),r.a.createElement(I.b,{path:"/creator/:directoryId/:setId",element:e?r.a.createElement(W,null):r.a.createElement(I.a,{to:"/",replace:!0})}),r.a.createElement(I.b,{path:"/viewer/:directoryId/:setId",element:e?r.a.createElement(B,null):r.a.createElement(I.a,{to:"/",replace:!0})}),r.a.createElement(I.b,{path:"/",element:r.a.createElement(j,null)})))};a(53);const z=C(),q=Object(n.createRoot)(document.getElementById("root"));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)},e=>{console.log("Service Worker registration failed:",e)})}),q.render(r.a.createElement(s.a,{store:z},r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null))))}},[[28,1,2]]]);
//# sourceMappingURL=main.7d4a99e5.chunk.js.map
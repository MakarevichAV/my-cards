(this["webpackJsonpmy-cards"]=this["webpackJsonpmy-cards"]||[]).push([[0],{19:function(e,t,a){},28:function(e,t,a){e.exports=a(54)},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(20),s=a(5),l=a(11),d=a(22),o=a(21);const i={user:null,error:null};var m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return{...e,user:t.payload,error:null};case"LOGIN_FAILURE":case"REGISTER_FAILURE":return{...e,user:null,error:t.payload};default:return e}};const u={user:null,userI:null,error:null,successMessage:null,isAuthenticated:"true"===localStorage.getItem("isAuthenticated"),isLogin:!0};var p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return localStorage.setItem("isAuthenticated","true"),{...e,user:t.payload.user.username,userId:t.payload.user._id,error:null,isAuthenticated:!0};case"LOGIN_FAILURE":return localStorage.setItem("isAuthenticated","false"),{...e,user:null,error:t.payload,isAuthenticated:!1};case"LOGOUT":return localStorage.setItem("isAuthenticated","false"),{...e,user:null,error:null,isAuthenticated:!1};case"REGISTER_SUCCESS":return{...e,user:t.payload,error:null,successMessage:t.payload.message};case"REGISTER_FAILURE":return{...e,user:null,error:t.payload};case"SET_IS_LOGIN":return{...e,isLogin:t.payload};case"SET_SUCCESS_MESSAGE":return{...e,successMessage:t.payload};case"CLEAR_SUCCESS_MESSAGE":return{...e,successMessage:null};default:return e}};const E=[];var y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_DIRECTORY":return e.map(e=>e._id===t.payload.id?{...e,isEditing:!1,name:t.payload.editedName,image:t.payload.editedImage}:e);case"DELETE_DIRECTORY":return e.filter(e=>e._id!==t.payload.id);case"ADD_DIRECTORY":return[...e,{_id:t.payload._id,name:"New Directory",image:"",setsCount:0,isEditing:!0,editedName:"",editedImage:""}];case"GET_DIRECTORIES":return t.payload;case"UPDATE_DIRECTORY_SETS_COUNT":return e.map(e=>e._id===t.payload.id?{...e,setsCount:t.payload.setsCount}:e);default:return e}};const v=[];var g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_SET":return e.map(e=>e._id===t.payload.id?{...e,isEditing:!1,name:t.payload.editedName,image:t.payload.editedImage}:e);case"DELETE_SET":return e.filter(e=>e._id!==t.payload.id);case"ADD_SET":return[...e,{_id:t.payload._id,directoryId:t.payload.directoryId,name:"New Set",image:"",cardsCount:0,isEditing:!0,editedName:"",editedImage:""}];case"GET_SETS":return t.payload;case"UPDATE_SET_CARDS_COUNT":return e.map(e=>e._id===t.payload.id?{...e,cardsCount:t.payload.cardsCount}:e);default:return e}};const h=[];var b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_CARD":return e.map(e=>e._id===t.payload.id?{...e,image:t.payload.editedImage,phrase:t.payload.editedPhrase,transcription:t.payload.editedTranscription,note:t.payload.editedNote,example1:t.payload.editedExample1,translation:t.payload.editedTranslation,example2:t.payload.editedExample2}:e);case"DELETE_CARD":return e.filter(e=>e._id!==t.payload.id);case"ADD_CARD":return[...e,{_id:t.payload._id,setId:t.payload.setId,directoryId:t.payload.directoryId,image:"",phrase:"",transcription:"",note:"",example1:"",translation:"",example2:"",editedImage:"",editedPhrase:"",editedTranscription:"",editedNote:"",editedExample1:"",editedTranslation:"",editedExample2:"",isEditing:!0}];case"GET_CARDS":return t.payload;default:return e}};var N=Object(l.combineReducers)({sample:m,auth:p,directory:y,set:g,card:b}),S=a(58);var C=()=>Object(l.createStore)(N,Object(o.composeWithDevTools)(Object(l.applyMiddleware)(d.a.withExtraArgument({axios:S.a})))),O=a(7),I=a(3);var f=e=>{let{onSubmit:t}=e;const[a,r]=Object(c.useState)(""),[l,d]=Object(c.useState)(""),o=Object(s.c)(),i=Object(s.d)(e=>e.auth.error);return n.a.createElement("div",null,n.a.createElement("label",null,"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:",n.a.createElement("input",{type:"text",value:a,onChange:e=>r(e.target.value)})),n.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c:",n.a.createElement("input",{type:"password",value:l,onChange:e=>d(e.target.value)})),n.a.createElement("button",{className:"btn-type1",onClick:()=>{o((e=>{let{username:t,password:a}=e;return async e=>{try{const c=await S.a.post("".concat("https://myedcards.ru","/login"),{username:t,password:a});e({type:"LOGIN_SUCCESS",payload:c.data});const n={userId:c.data.user._id,username:c.data.user.username};localStorage.setItem("user",JSON.stringify(n))}catch(i){e({type:"LOGIN_FAILURE",payload:i.message})}}})({username:a,password:l})),t({username:a,password:l})}},"\u0412\u043e\u0439\u0442\u0438"),i&&n.a.createElement("p",{style:{color:"red"}},i))};var w=e=>{let{onSubmit:t}=e;const[a,r]=Object(c.useState)(""),[l,d]=Object(c.useState)(""),[o,i]=Object(c.useState)(""),m=Object(s.c)(),u=Object(s.d)(e=>e.auth.error),p=Object(s.d)(e=>e.auth.successMessage);Object(c.useEffect)(()=>{p&&(m({type:"SET_IS_LOGIN",payload:!0}),m({type:"SET_SUCCESS_MESSAGE",payload:p}))},[p,m]);return n.a.createElement("div",null,n.a.createElement("label",null,"Username:",n.a.createElement("input",{type:"text",value:a,onChange:e=>r(e.target.value)})),n.a.createElement("label",null,"Password:",n.a.createElement("input",{type:"password",value:l,onChange:e=>d(e.target.value)})),n.a.createElement("label",null,"Confirm Password:",n.a.createElement("input",{type:"password",value:o,onChange:e=>i(e.target.value)})),n.a.createElement("button",{className:"btn-type1",onClick:()=>{l===o?(m((e=>{let{username:t,password:a}=e;return async e=>{try{e({type:"REGISTER_SUCCESS",payload:(await S.a.post("".concat("https://myedcards.ru","/register"),{username:t,password:a})).data})}catch(u){e({type:"REGISTER_FAILURE",payload:u.message})}}})({username:a,password:l})),t({username:a,password:l})):m({type:"REGISTER_FAILURE",payload:"Passwords do not match"})}},"Register"),u&&n.a.createElement("p",{style:{color:"red"}},u))};a(41);var j=()=>{const e=Object(s.c)(),t=Object(s.d)(e=>e.auth.isLogin),[a,r]=Object(c.useState)({}),l=Object(s.d)(e=>e.auth.successMessage),d=Object(I.p)(),o=Object(s.d)(e=>e.auth.isAuthenticated);Object(c.useEffect)(()=>{l&&t&&d("/home")},[l,t,d]),Object(c.useEffect)(()=>{o&&d("/home")},[o,d]);const i=e=>{r(e)};return n.a.createElement("div",null,n.a.createElement("div",{className:"logo-container"},n.a.createElement("img",{src:"/max-logo.png",alt:"Logo"})),n.a.createElement("div",{className:"login-container"},l&&n.a.createElement("div",{className:"success-message"},l),n.a.createElement("h2",null,t?"Login":"Register"),t?n.a.createElement(f,{onSubmit:i}):n.a.createElement(w,{onSubmit:i}),n.a.createElement("p",{onClick:()=>{e({type:"SET_IS_LOGIN",payload:!t})}},t?"Need to register?":"Already have an account?")))};a(42);var _=e=>{let{message:t,onCancel:a,onConfirm:r}=e;const s=Object(c.useRef)(null),l=e=>{s.current===e.target&&a()};return Object(c.useEffect)(()=>(document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[]),n.a.createElement("div",{className:"confirm",ref:s},n.a.createElement("div",{className:"confirm-content"},n.a.createElement("div",{className:"confirm-cross",onClick:a}),n.a.createElement("div",{className:"exclamation-mark"}),n.a.createElement("p",{className:"confirm-text"},t),n.a.createElement("div",{className:"confirm-buttons"},n.a.createElement("div",{className:"btn-type1",onClick:a},"Cancel"),n.a.createElement("div",{className:"btn-type2",onClick:r},"Exit"))))};a(43);var k=Object(s.b)(null,e=>({onAddDirectory:()=>e(async(e,t)=>{try{const t={name:"New Directory",image:"",setsCount:0},a=localStorage.getItem("user"),c=JSON.parse(a).userId;e({type:"ADD_DIRECTORY",payload:(await S.a.post("".concat("https://myedcards.ru","/addDirectory"),{...t,userId:c})).data})}catch(r){var a,c,n;throw console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438:",r),console.error("Response data:",null===(a=r.response)||void 0===a?void 0:a.data),console.error("Response status:",null===(c=r.response)||void 0===c?void 0:c.status),console.error("Response headers:",null===(n=r.response)||void 0===n?void 0:n.headers),r}}),onLogout:()=>e(e=>{localStorage.removeItem("user"),e({type:"LOGOUT"})})}))(e=>{let{onAddDirectory:t,onLogout:a,showAddDirectory:r,showGoToBack:s,showGoToSets:l,directoryId:d}=e;const[o,i]=Object(c.useState)(!1),m=Object(I.p)(),u=()=>{m("/home")};return n.a.createElement("header",null,n.a.createElement("div",{className:"logo",onClick:u}),r&&n.a.createElement("div",{className:"page-title"},"Directories"),n.a.createElement("div",{style:{display:"flex"}},r&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"add-directory",onClick:t})),s&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"go-to-back",onClick:u})),l&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"go-to-back",onClick:()=>{m("/sets/".concat(d))}})),n.a.createElement("div",{className:"delimiter"}),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"logout",onClick:()=>{i(!0)}}),o&&n.a.createElement(_,{message:"Do you really want to exit your account?",onCancel:()=>{i(!1)},onConfirm:()=>{a(),i(!1)}}))))});a(44),a(45);var T=()=>n.a.createElement("div",{className:"loader-container"},n.a.createElement("div",{className:"lds-dual-ring"}));var x=e=>{let{onClose:t,onImageSelect:a}=e;const[r,s]=Object(c.useState)(""),[l,d]=Object(c.useState)([]),[o,i]=Object(c.useState)(!1),m=async()=>{try{i(!0);const e=await S.a.get("https://pixabay.com/api/?key=33256265-9311bbeda59bd85787262c6fb&q=".concat(encodeURIComponent(r),"&image_type=illustration&per_page=50"));d(e.data.hits)}catch(e){console.error("Error searching images:",e)}finally{i(!1)}};return n.a.createElement("div",{className:"search-popup"},n.a.createElement("div",{className:"search-header"},n.a.createElement("div",{className:"search-input-wrap"},n.a.createElement("input",{type:"text",onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"===e.key&&m()},placeholder:"Searching image"}),n.a.createElement("div",{className:"loupe",onClick:m})),n.a.createElement("div",{className:"close-icon",onClick:t})),n.a.createElement("div",{className:"search-results"},o?n.a.createElement("div",{className:"loader-wrap"},n.a.createElement(T,null)):l.length>0?l.map(e=>n.a.createElement("div",{className:"search-item",key:e.id,onClick:()=>{return c=e.previewURL,a(c),void t();var c},style:{backgroundImage:"url(".concat(e.previewURL,")"),backgroundSize:"contain"}})):n.a.createElement("p",{className:"search-result-note"},"No search results. Try changing your search query.")))};var R=Object(s.b)((e,t)=>{e.directory.find(e=>e.id===t.id);return{isEditing:t.isEditing||!1,editedName:t.editedName||"",editedImage:t.editedImage||""}},e=>({onEdit:t=>e(((e,t,a)=>({type:"EDIT_DIRECTORY",payload:{id:e,editedName:t,editedImage:a}}))(t)),onSave:(t,a,c)=>{e(((e,t,a)=>async(c,n)=>{try{const n=localStorage.getItem("user"),r=JSON.parse(n).userId;await S.a.put("".concat("https://myedcards.ru","/editDirectory/").concat(e),{editedName:t,editedImage:a,userId:r}),c({type:"SAVE_DIRECTORY",payload:{id:e,editedName:t,editedImage:a}})}catch(r){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438:",r)}})(t,a,c))},onDelete:t=>e((e=>async(t,a)=>{try{const a=localStorage.getItem("user"),c=JSON.parse(a).userId;await S.a.delete("".concat("https://myedcards.ru","/deleteDirectory/").concat(e,"?userId=").concat(c)),t({type:"DELETE_DIRECTORY",payload:{id:e}})}catch(c){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438:",c)}})(t))}))(e=>{let{_id:t,name:a,image:r,setsCount:s,editedName:l,editedImage:d,onSave:o,onDelete:i}=e;const[m,u]=Object(c.useState)(!1),[p,E]=Object(c.useState)(!1),[y,v]=Object(c.useState)(!1),[g,h]=Object(c.useState)(l||""),[b,N]=Object(c.useState)(r||""),[S,C]=Object(c.useState)(""),O=Object(I.p)();Object(c.useEffect)(()=>{p&&h(a||"")},[p,l,d,a,r]),Object(c.useEffect)(()=>{S&&(N(S),C(""))},[S]);const f={backgroundImage:"url(".concat(b||"/images/folder.png",")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"80px",height:"80px",marginRight:"15px",borderRadius:"8px"},w=()=>{o(t,g,b),E(!1)},[j,_]=Object(c.useState)(!1),k=()=>{_(!0)},R=()=>{_(!1)},D=()=>{E(!0)},A=()=>{O("/sets/".concat(t),{state:{directoryName:a}})};return n.a.createElement("div",{className:"directory-tile"},j&&n.a.createElement("div",{className:"directory-popup"},y&&n.a.createElement(T,null),!y&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"directory-popup-crose",onClick:R}),n.a.createElement("p",{className:"directory-confirm-text"},n.a.createElement("div",{className:"set-popup-icon"}),"Delete the directory?"),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"btn-type1 directory-confirm-btn",onClick:R},"can\u0441el"),n.a.createElement("div",{className:"btn-type2 directory-confirm-btn",onClick:async()=>{v(!0);try{await i(t)}finally{v(!1)}}},"delete")))),n.a.createElement("div",{className:"directory-image",style:f}),m&&n.a.createElement(x,{onClose:()=>{u(!1)},onImageSelect:e=>{N(e)}}),p?n.a.createElement("div",{className:"directory-info"},n.a.createElement("input",{className:"directory-input",type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438"}),n.a.createElement("div",{className:"directory-edit-buttons"},n.a.createElement("div",{className:"btn-type2 btn-choose-img",onClick:()=>{u(!0)}},n.a.createElement("div",{className:"camera"}),n.a.createElement("span",{className:"btn-text"},"picture")),n.a.createElement("div",{className:"save-directory btns mobile",onClick:w}),n.a.createElement("div",{className:"delete-directory btns mobile",onClick:k}))):n.a.createElement("div",{className:"directory-info"},n.a.createElement("div",{className:"directory-name"},a),n.a.createElement("div",{className:"sets-count"},s," sets"),n.a.createElement("div",{className:"directory-btns btns_mobile"},n.a.createElement("div",{className:"btn-type1",onClick:A},"\u21d2 to sets"),n.a.createElement("div",{className:"edit-directory btns",onClick:D}))),p?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"save-directory btns desctop",onClick:w}),n.a.createElement("div",{className:"delete-directory btns desctop",onClick:k})):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"btn-type1 btns_desctop",onClick:A},"\u21d2 to sets"),n.a.createElement("div",{className:"edit-directory btns btns_desctop",onClick:D})))});a(46);var D=Object(s.b)(e=>({directories:e.directory}),e=>({onGetDirectories:()=>e(async(e,t)=>{try{const t=localStorage.getItem("user"),a=JSON.parse(t).userId,c=await S.a.get("".concat("https://myedcards.ru","/directories/").concat(a));e({type:"GET_DIRECTORIES",payload:c.data})}catch(a){console.error("Error getting directories:",a)}})}))(e=>{let{directories:t,onGetDirectories:a}=e;const[r,s]=Object(c.useState)(!1),[l,d]=Object(c.useState)(!0),[o,i]=Object(c.useState)(null);Object(c.useEffect)(()=>{(async()=>{try{d(!0);await a();d(!1)}catch(o){i(o.message),d(!1)}})()},[a]);const m=Array.isArray(t)?[...t].reverse():[];return n.a.createElement("div",{className:"home-page page"},n.a.createElement(k,{showAddDirectory:!0,showGoToBack:!1}),n.a.createElement("div",{className:"content"},l?n.a.createElement(T,null):o?n.a.createElement("div",{className:"error-message"},n.a.createElement("p",null,o)):m.length>0?m.map(e=>n.a.createElement(R,Object.assign({key:e._id},e))):n.a.createElement("div",{className:"page-description"},n.a.createElement("p",null,"Your directories will be here"))),r&&n.a.createElement(R,{key:"new",id:"new",name:"",image:"",setsCount:0,isEditing:!0,editedName:"",editedImage:""}))});const A=(e,t)=>({type:"UPDATE_DIRECTORY_SETS_COUNT",payload:{id:e,setsCount:t}});a(47);var L=Object(s.b)((e,t)=>{e.set.find(e=>e.id===t.id);return{isEditing:t.isEditing||!1,editedName:t.editedName||"",editedImage:t.editedImage||""}},e=>({onEdit:t=>e(((e,t,a)=>({type:"EDIT_SET",payload:{id:e,editedName:t,editedImage:a}}))(t)),onSave:(t,a,c,n)=>{e(((e,t,a,c)=>async(n,r)=>{try{await S.a.put("".concat("https://myedcards.ru","/editSet/").concat(e),{editedName:t,editedImage:a,directoryId:c}),n({type:"SAVE_SET",payload:{id:e,editedName:t,editedImage:a}})}catch(s){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043d\u0430\u0431\u043e\u0440\u0430:",s)}})(t,a,c,n))},onDelete:(t,a)=>e(((e,t)=>async(a,c)=>{try{await S.a.delete("".concat("https://myedcards.ru","/deleteSet/").concat(e,"?directoryId=").concat(t)),a({type:"DELETE_SET",payload:{id:e}});const n=c().set.length;a(A(t,n))}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043d\u0430\u0431\u043e\u0440\u0430:",n)}})(t,a))}))(e=>{let{_id:t,name:a,image:r,cardsCount:s,editedName:l,editedImage:d,onSave:o,onDelete:i,directoryId:m}=e;const[u,p]=Object(c.useState)(!1),[E,y]=Object(c.useState)(!1),[v,g]=Object(c.useState)(!1),[h,b]=Object(c.useState)(l||""),[N,S]=Object(c.useState)(r||""),[C,O]=Object(c.useState)(""),f=Object(I.p)();Object(c.useEffect)(()=>{E&&b(a||"")},[E,l,d,a,r]),Object(c.useEffect)(()=>{C&&(S(C),O(""))},[C]);const w={backgroundImage:"url(".concat(N||"/images/cards.png",")"),backgroundSize:"".concat(N?"cover":"contain"),backgroundPosition:"top center",backgroundRepeat:"no-repeat",minWidth:"80px",height:"80px",marginRight:"15px",borderRadius:"8px"},j=()=>{o(t,h,N,m),y(!1)},[_,k]=Object(c.useState)(!1),R=()=>{k(!0)},D=()=>{k(!1)},A=()=>{y(!0)},L=()=>{f("/creator/".concat(m,"/").concat(t),{state:{setName:a}})},G=()=>{f("/viewer/".concat(m,"/").concat(t),{state:{setName:a}})};return n.a.createElement("div",{className:"set-tile"},_&&n.a.createElement("div",{className:"set-popup"},v&&n.a.createElement(T,null),!v&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"set-popup-crose",onClick:D}),n.a.createElement("p",{className:"set-confirm-text"},n.a.createElement("div",{className:"set-popup-icon"}),"Delete the set?"),n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"btn-type1 set-confirm-btn",onClick:D},"can\u0441el"),n.a.createElement("div",{className:"btn-type2 set-confirm-btn",onClick:async()=>{g(!0);try{await i(t,m)}finally{g(!1)}}},"delete")))),n.a.createElement("div",{className:"set-image",style:w}),u&&n.a.createElement(x,{onClose:()=>{p(!1)},onImageSelect:e=>{S(e)}}),E?n.a.createElement("div",{className:"set-info"},n.a.createElement("input",{className:"set-input",maxLength:"25",type:"text",value:h,onChange:e=>b(e.target.value),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438"}),n.a.createElement("div",{className:"set-edit-buttons"},n.a.createElement("div",{className:"btn-type2",onClick:()=>{p(!0)}},n.a.createElement("div",{className:"camera"}),n.a.createElement("span",{className:"btn-text"},"picture")),n.a.createElement("div",{className:"save-set btns mobile",onClick:j}),n.a.createElement("div",{className:"delete-set btns mobile",onClick:R}))):n.a.createElement("div",{className:"set-info"},n.a.createElement("div",{className:"set-name"},a),n.a.createElement("div",{className:"cards-count"},s," cards"),n.a.createElement("div",{className:"btns_mobile"},n.a.createElement("div",{className:"btn-type3 btn-creat",onClick:L},n.a.createElement("div",{className:"set-tile-btn-icon-creat"}),n.a.createElement("span",{className:"btn-text"},"create")),n.a.createElement("div",{className:"btn-type1 btn-view",onClick:G},n.a.createElement("div",{className:"set-tile-btn-icon-view"}),n.a.createElement("span",{className:"btn-text"},"view")),n.a.createElement("div",{className:"edit-set btns",onClick:A}))),E?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"save-set btns desctop",onClick:j}),n.a.createElement("div",{className:"delete-set btns desctop",onClick:R})):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"btns_desctop"},n.a.createElement("div",{className:"btn-type3 btn-creat",onClick:L},n.a.createElement("div",{className:"set-tile-btn-icon-creat"}),n.a.createElement("span",{className:"btn-text"},"create")),n.a.createElement("div",{className:"btn-type1 btn-view",onClick:G},n.a.createElement("div",{className:"set-tile-btn-icon-view"}),n.a.createElement("span",{className:"btn-text"},"view"))),n.a.createElement("div",{className:"edit-set btns btns_desctop",onClick:A})))});a(48);var G=Object(s.b)(e=>({sets:e.set}),(e,t)=>({onGetSets:t=>e((e=>async(t,a)=>{try{const a=await S.a.get("".concat("https://myedcards.ru","/sets/").concat(e));t({type:"GET_SETS",payload:a.data})}catch(c){console.error("Error getting sets:",c)}})(t)),onAddSet:t=>e((e=>async(t,a)=>{try{const c={name:"New Set",image:"",cardsCount:0};t({type:"ADD_SET",payload:(await S.a.post("".concat("https://myedcards.ru","/addSet"),{...c,directoryId:e})).data});const n=a().set.length;t(A(e,n))}catch(s){var c,n,r;throw console.error("Error of adding set:",s),console.error("Response data:",null===(c=s.response)||void 0===c?void 0:c.data),console.error("Response status:",null===(n=s.response)||void 0===n?void 0:n.status),console.error("Response headers:",null===(r=s.response)||void 0===r?void 0:r.headers),s}})(t))}))(e=>{var t;let{sets:a,onAddSet:r,onGetSets:s}=e;const l=(null===(t=Object(I.n)().state)||void 0===t?void 0:t.directoryName)||"Directory",[d,o]=Object(c.useState)(!0),[i,m]=Object(c.useState)(null),{directoryId:u}=Object(I.r)(),p=Array.isArray(a)?[...a].reverse():[];return Object(c.useEffect)(()=>{(async()=>{try{o(!0);await s(u);o(!1)}catch(i){m(i.message),o(!1)}})()},[s,u]),n.a.createElement("div",{className:"sets-page page"},n.a.createElement(k,{showAddDirectory:!1,showGoToBack:!0,showGoToSets:!1}),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"sets-container"},n.a.createElement("div",{className:"sets-content-header"},n.a.createElement("h2",{className:"sets-title"},l),n.a.createElement("div",{className:"add-set",onClick:()=>r(u)})),n.a.createElement("div",{className:"container-content"},d?n.a.createElement(T,null):i?n.a.createElement("div",{className:"error-message"},n.a.createElement("p",null,i)):p.length>0?p.map(e=>n.a.createElement(L,Object.assign({key:e._id},e))):n.a.createElement("div",{className:"page-description"},n.a.createElement("p",null,"Your sets will be here"))))))});const U=(e,t)=>({type:"UPDATE_SET_CARDS_COUNT",payload:{id:e,cardsCount:t}}),P=e=>async(t,a)=>{try{const a=await S.a.get("".concat("https://myedcards.ru","/cards/").concat(e));t({type:"GET_CARDS",payload:a.data})}catch(c){console.error("Error getting cards:",c)}};var F=a(57);var Y=e=>{let{imageStyle:t,handleSearchClick:a,isChanged:c,handleSave:r,handleDeleteClick:s,handleInputChange:l,isConfirmOpen:d,isLoading:o,handleCancelConfirm:i,handleDelete:m,localEditedPhrase:u,setLocalEditedPhrase:p,localEditedTranscription:E,setLocalEditedTranscription:y,localEditedNote:v,setLocalEditedNote:g,localEditedExample1:h,setLocalEditedExample1:b,localEditedTranslation:N,setLocalEditedTranslation:S,localEditedExample2:C,setLocalEditedExample2:O}=e;return n.a.createElement("div",{className:"card-tile"},d&&n.a.createElement("div",{className:"card-popup"},o&&n.a.createElement(T,null),!o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"card-popup-crose",onClick:i}),n.a.createElement("div",{className:"card-popup-icon"}),n.a.createElement("p",{className:"card-confirm-text"},"Delete the card?"),n.a.createElement("div",{className:"btn-type1 card-confirm-btn",onClick:i},"can\u0441el"),n.a.createElement("div",{className:"btn-type2 card-confirm-btn",onClick:m},"delete"))),n.a.createElement("div",{className:"card-side1"},n.a.createElement("div",{className:"card-image-container card-row"},n.a.createElement("div",{className:"card-image",style:t}),n.a.createElement("div",{className:"btn-type2-short",onClick:a},n.a.createElement("div",{className:"camera"})),c&&n.a.createElement("div",{className:"save-card btns",onClick:r}),!c&&n.a.createElement("div",{className:"save-card-disact btns"}),n.a.createElement("div",{className:"delete-card btns",onClick:s})),n.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:u,onChange:e=>l(p,e),placeholder:"Word or phrase"}),n.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:E,onChange:e=>l(y,e),placeholder:"Transcription"}),n.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:v,onChange:e=>l(g,e),placeholder:"Additional information"}),n.a.createElement("textarea",{className:"card-input",maxLength:"60",type:"text",value:h,onChange:e=>l(b,e),placeholder:"Example of using this phrase"})),n.a.createElement("div",{className:"card-side2"},n.a.createElement("input",{className:"card-input",maxLength:"30",type:"text",value:N,onChange:e=>l(S,e),placeholder:"Translation"}),n.a.createElement("textarea",{className:"card-input",maxLength:"60",type:"text",value:C,onChange:e=>l(O,e),placeholder:"Additional information"})))};a(49),a(50);var M=e=>{let{image:t,defaultImage:a,phrase:r,transcription:s,note:l,example1:d,translation:o,example2:i}=e;const[m,u]=Object(c.useState)(!1),p={backgroundImage:"url(".concat(t||a,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"};return n.a.createElement("div",{className:"card-tile view-mode ".concat(m?"flipped":""),onClick:()=>{u(!m)}},n.a.createElement("div",{className:"card-side1_view"},n.a.createElement("div",{className:"card-image_view",style:p}),n.a.createElement("p",{className:"card-phrase_view"},r),s&&n.a.createElement("p",{className:"card-transcription_view"},"[",s,"]"),l&&n.a.createElement("p",{className:"card-note_view"},l),d&&n.a.createElement("p",{className:"card-example_view"},d)),n.a.createElement("div",{className:"card-side2_view"},o&&n.a.createElement("p",{className:"card-translation_view"},o),i&&n.a.createElement("p",{className:"card-example_view"},i)))};var J=Object(s.b)((e,t)=>{e.card.find(e=>e.id===t.id);return{isEditing:t.isEditing||!1,editedImage:t.editedImage||"",editedPhrase:t.editedPhrase||"",editedTranscription:t.editedTranscription||"",editedNote:t.editedNote||"",editedExample1:t.editedExample1||"",editedTranslation:t.editedTranslation||"",editedExample2:t.editedExample2||""}},e=>({onEdit:t=>e(((e,t,a)=>({type:"EDIT_CARD",payload:{id:e,editedPhrase:t,editedImage:a}}))(t)),onSave:(t,a,c,n,r,s,l,d,o,i)=>{e(((e,t,a,c,n,r,s,l,d,o)=>async(i,m)=>{try{await S.a.put("".concat("https://myedcards.ru","/editCard/").concat(e),{editedImage:t,editedPhrase:a,editedTranscription:c,editedNote:n,editedExample1:r,editedTranslation:s,editedExample2:l,directoryId:d,setId:o}),i({type:"SAVE_CARD",payload:{id:e,editedImage:t,editedPhrase:a,editedTranscription:c,editedNote:n,editedExample1:r,editedTranslation:s,editedExample2:l}})}catch(u){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438:",u)}})(t,a,c,n,r,s,l,d,o,i))},onDelete:(t,a)=>e(((e,t)=>async(a,c)=>{try{await S.a.delete("".concat("https://myedcards.ru","/deleteCard/").concat(e,"?setId=").concat(t)),a({type:"DELETE_CARD",payload:{id:e}});const n=c().card.length;a(U(t,n))}catch(n){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438:",n)}})(t,a))}))(e=>{let{_id:t,image:a,phrase:r,transcription:s,note:l,example1:d,translation:o,example2:i,editedImage:m,editedPhrase:u,editedTranscription:p,editedNote:E,editedExample1:y,editedTranslation:v,editedExample2:g,onSave:h,onDelete:b,directoryId:N,setId:S,creating:C}=e;const[O,f]=Object(c.useState)(!1),[w,j]=Object(c.useState)(C),[_,k]=Object(c.useState)(!1),[T,R]=Object(c.useState)(!1),[D,A]=Object(c.useState)(a||""),[L,G]=Object(c.useState)(u||""),[U,P]=Object(c.useState)(p||""),[F,J]=Object(c.useState)(E||""),[W,B]=Object(c.useState)(y||""),[V,z]=Object(c.useState)(v||""),[q,X]=Object(c.useState)(g||""),[K,H]=Object(c.useState)("");Object(I.p)();Object(c.useEffect)(()=>{w&&(G(r||""),P(s||""),J(l||""),B(d||""),z(o||""),X(i||""))},[w,m,u,p,E,y,v,g,a,r,s,l,d,o,i]),Object(c.useEffect)(()=>{K&&(A(K),H(""))},[K]);const Q={backgroundImage:"url(".concat(D||"/images/cards.png",")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"70px",height:"70px",marginRight:"15px",borderRadius:"8px"},[Z,$]=Object(c.useState)(!1);return n.a.createElement(n.a.Fragment,null,w?n.a.createElement(Y,{isConfirmOpen:Z,isLoading:_,handleCancelConfirm:()=>{$(!1)},handleDelete:async()=>{k(!0);try{await b(t,S)}finally{k(!1)}},imageStyle:Q,handleSearchClick:()=>{f(!0)},isChanged:T,handleSave:()=>{T&&(h(t,D,L,U,F,W,V,q,N,S),R(!1))},handleDeleteClick:()=>{$(!0)},handleInputChange:(e,t)=>{e(t.target.value),R(!0)},localEditedPhrase:L,setLocalEditedPhrase:G,localEditedTranscription:U,setLocalEditedTranscription:P,localEditedNote:F,setLocalEditedNote:J,localEditedExample1:W,setLocalEditedExample1:B,localEditedTranslation:V,setLocalEditedTranslation:z,localEditedExample2:q,setLocalEditedExample2:X}):n.a.createElement(M,{image:a,defaultImage:"/images/cards.png",phrase:r,transcription:s,note:l,example1:d,translation:o,example2:i}),O&&n.a.createElement(x,{onClose:()=>{f(!1)},onImageSelect:e=>{A(e),R(!0)}}))});a(18),a(19);var W=Object(s.b)(e=>({cards:e.card}),(e,t)=>({onGetCards:t=>e(P(t)),onAddCard:(t,a)=>e(((e,t)=>async(a,c)=>{try{const n={image:"",phrase:"",transcription:"",note:"",example1:"",translation:"",example2:""};a({type:"ADD_CARD",payload:(await S.a.post("".concat("https://myedcards.ru","/addCard"),{...n,directoryId:e,setId:t,setId:t})).data});const r=c().card.length;a(U(t,r))}catch(l){var n,r,s;throw console.error("Error of adding card:",l),console.error("Response data:",null===(n=l.response)||void 0===n?void 0:n.data),console.error("Response status:",null===(r=l.response)||void 0===r?void 0:r.status),console.error("Response headers:",null===(s=l.response)||void 0===s?void 0:s.headers),l}})(t,a))}))(e=>{var t;let{cards:a,onAddCard:r,onGetCards:s}=e;const l=Object(I.p)(),d=(null===(t=Object(I.n)().state)||void 0===t?void 0:t.setName)||"Set",[o,i]=Object(c.useState)(!0),[m,u]=Object(c.useState)(null),{directoryId:p,setId:E}=Object(I.r)(),[y,v]=Object(c.useState)(0),g=Array.isArray(a)?[...a].reverse():[];Object(c.useEffect)(()=>{(async()=>{try{i(!0);await s(E);i(!1)}catch(m){u(m.message),i(!1)}})()},[s,E]);const[h,b]=Object(c.useState)(!1);return n.a.createElement("div",{className:"cards-page page"},n.a.createElement(k,{showAddDirectory:!1,showGoToBack:!1,showGoToSets:!0,directoryId:p}),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"cards-container"},n.a.createElement("div",{className:"cards-content-header",style:{backgroundColor:"#d9b216"}},n.a.createElement("h2",{className:"content-title"},d),n.a.createElement("div",{className:"cards-header-nav"},n.a.createElement("div",{className:"go-to-view",onClick:()=>{l("/viewer/".concat(p,"/").concat(E),{state:{setName:d}})}}),n.a.createElement("div",{className:"add-card",onClick:async()=>{b(!0);try{await r(p,E),v(0)}catch(m){console.error("Error adding card:",m)}finally{b(!1)}}}))),n.a.createElement("div",{className:"container-content"},o||h?n.a.createElement(T,null):m?n.a.createElement("div",{className:"error-message"},n.a.createElement("p",null,m)):g.length>0?n.a.createElement(F.a,{interval:null,activeIndex:y,onSelect:e=>v(e)},g.map(e=>n.a.createElement(F.a.Item,{key:e._id},n.a.createElement(J,Object.assign({creating:!0,viewing:!1},e))))):n.a.createElement("div",{className:"page-description"},n.a.createElement("p",null,"Your cards will be here"))))))});var B=Object(s.b)(e=>({cards:e.card}),(e,t)=>({onGetCards:t=>e(P(t))}))(e=>{var t;let{cards:a,onGetCards:r}=e;const s=Object(I.p)(),l=(null===(t=Object(I.n)().state)||void 0===t?void 0:t.setName)||"Set",[d,o]=Object(c.useState)(!0),[i,m]=Object(c.useState)(null),{directoryId:u,setId:p}=Object(I.r)(),[E,y]=Object(c.useState)(0),v=Array.isArray(a)?[...a].reverse():[];Object(c.useEffect)(()=>{(async()=>{try{o(!0);await r(p);o(!1)}catch(i){m(i.message),o(!1)}})()},[r,p]);return n.a.createElement("div",{className:"cards-page page"},n.a.createElement(k,{showAddDirectory:!1,showGoToBack:!1,showGoToSets:!0,directoryId:u}),n.a.createElement("div",{className:"content"},n.a.createElement("div",{className:"cards-container"},n.a.createElement("div",{className:"cards-content-header",style:{backgroundColor:"#525266"}},n.a.createElement("h2",{className:"content-title"},l),n.a.createElement("div",{className:"cards-header-nav"},n.a.createElement("div",{className:"go-to-creat",onClick:()=>{s("/creator/".concat(u,"/").concat(p),{state:{setName:l}})}}))),n.a.createElement("div",{className:"container-content"},d?n.a.createElement(T,null):i?n.a.createElement("div",{className:"error-message"},n.a.createElement("p",null,i)):v.length>0?n.a.createElement(F.a,{interval:null,activeIndex:E,onSelect:e=>y(e)},v.map(e=>n.a.createElement(F.a.Item,{key:e._id},n.a.createElement(J,Object.assign({creating:!1,viewing:!0},e))))):n.a.createElement("div",{className:"page-description"},n.a.createElement("p",null,"Your cards will be here"))))))});a(52);var V=()=>{const e=Object(s.d)(e=>e.auth.isAuthenticated);return n.a.createElement(O.a,null,n.a.createElement(I.d,null,n.a.createElement(I.b,{path:"/home",element:e?n.a.createElement(D,null):n.a.createElement(I.a,{to:"/",replace:!0})}),n.a.createElement(I.b,{path:"/sets/:directoryId",element:e?n.a.createElement(G,null):n.a.createElement(I.a,{to:"/",replace:!0})}),n.a.createElement(I.b,{path:"/creator/:directoryId/:setId",element:e?n.a.createElement(W,null):n.a.createElement(I.a,{to:"/",replace:!0})}),n.a.createElement(I.b,{path:"/viewer/:directoryId/:setId",element:e?n.a.createElement(B,null):n.a.createElement(I.a,{to:"/",replace:!0})}),n.a.createElement(I.b,{path:"/",element:n.a.createElement(j,null)})))};a(53);document.addEventListener("touchstart",(function(e){z=e.touches[0].clientX,q=e.touches[0].clientY}),!1),document.addEventListener("touchmove",(function(e){if(!z||!q)return;let t=e.touches[0].clientX,a=e.touches[0].clientY,c=z-t,n=q-a;Math.abs(c)>Math.abs(n)||e.preventDefault();z=null,q=null}),!1);let z=null,q=null;const X=C(),K=Object(r.createRoot)(document.getElementById("root"));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered with scope:",e.scope)},e=>{console.log("Service Worker registration failed:",e)})}),K.render(n.a.createElement(s.a,{store:X},n.a.createElement(n.a.StrictMode,null,n.a.createElement(V,null))))}},[[28,1,2]]]);
//# sourceMappingURL=main.f7eddc2a.chunk.js.map